<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Registration Charts</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
        }
        .logo {
            width: 100px;
            height: auto;
        }
        .tooltip {
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            padding: 5px;
            font-size: 12px;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <div class="logo-container">
        <img src="C:/Users/lenovo/OneDrive/桌面/汽车大全/丰田.jpeg" alt="Toyota Logo" class="logo">
        <img src="C:/Users/lenovo/OneDrive/桌面/汽车大全/本田.jpeg" alt="Honda Logo" class="logo">
        <img src="C:/Users/lenovo/OneDrive/桌面/汽车大全/日产.jpeg" alt="Nissan Logo" class="logo">
        <img src="C:/Users/lenovo/OneDrive/桌面/汽车大全/奔驰.jpeg" alt="Mercedes Logo" class="logo">
        <img src="C:/Users/lenovo/OneDrive/桌面/汽车大全/马自达.jpeg" alt="Mazda Logo" class="logo">
        </div>

    <!-- Google Charts Line Chart -->
    <h1>Google Charts: Vehicle Registration (2016-2019)</h1>
    <div id="curve_chart" style="width: 1600px; height: 900px"></div>

    <!-- D3.js First Bar Chart -->
    <h1>Bar Chart: Honda and Toyota Registrations (2018)</h1>
    <svg id="chart1" width="800" height="500"></svg>

    <!-- D3.js Second Bar Chart -->
    <h1>Average Registrations by Vehicle Type (2016-2019)</h1>
    <svg id="chart2" width="800" height="500"></svg>

    <script type="text/javascript">
        // Google Charts Line Chart
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Year-Month', 'HONDA', 'MAZDA', 'MERCEDES BENZ', 'NISSAN', 'TOYOTA'],
                ['2016-01', 1448, 817, 760, 624, 1480],
                ['2016-02', 981, 438, 400, 590, 1158],
                ['2016-03', 1583, 560, 518, 577, 1527],
                ['2016-04', 1475, 559, 574, 639, 1431],
                ['2016-05', 1685, 697, 552, 742, 1917],
                ['2016-06', 1618, 741, 527, 688, 1808],
                ['2016-07', 1611, 411, 488, 447, 1383],
                ['2016-08', 1645, 570, 486, 399, 1400],
                ['2016-09', 1883, 734, 602, 543, 1690],
                ['2016-10', 2031, 484, 619, 662, 1615],
                ['2016-11', 1977, 427, 523, 491, 1673],
                ['2016-12', 1432, 853, 398, 626, 1409],
                ['2017-01', 1666, 553, 907, 357, 1548],
                ['2017-02', 1504, 657, 543, 370, 1124],
                ['2017-03', 1723, 738, 677, 957, 1614],
                ['2017-04', 1165, 770, 641, 225, 1505],
                ['2017-05', 1703, 882, 606, 463, 1768],
                ['2017-06', 1488, 911, 631, 411, 1840],
                ['2017-07', 1433, 764, 583, 230, 1480],
                ['2017-08', 1414, 773, 574, 244, 1775],
                ['2017-09', 583, 657, 558, 539, 869],
                ['2017-10', 851, 628, 635, 588, 1582],
                ['2017-11', 1113, 507, 737, 442, 1551],
                ['2017-12', 1370, 669, 884, 415, 2477],
                ['2018-01', 1219, 610, 611, 180, 861],
                ['2018-02', 886, 436, 479, 253, 935],
                ['2018-03', 1056, 520, 612, 548, 1181],
                ['2018-04', 1469, 601, 647, 198, 1218],
                ['2018-05', 1692, 553, 667, 337, 1257],
                ['2018-06', 2672, 359, 788, 526, 2449],
                ['2018-07', 799, 153, 623, 261, 660],
                ['2018-08', 1079, 296, 568, 329, 748],
                ['2018-09', 1067, 266, 557, 347, 936],
                ['2018-10', 1151, 455, 491, 315, 1286],
                ['2018-11', 879, 560, 494, 259, 1195],
                ['2018-12', 1071, 605, 585, 466, 1091],
                ['2019-01', 1839, 504, 924, 260, 1290],
                ['2019-02', 893, 238, 555, 247, 974]
            ]);

            var options = {
                title: 'Vehicle Registration',
                legend: { position: 'bottom' },
                pointSize: 5
            };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
            chart.draw(data, options);
        }
    </script>

        <script>
        // Data and logic for the first chart
        const data1 = [
            { "month": "2018-01", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 362, "Multi-purpose Vehicle": 248, "Sedan": 254, "SUV": 355 } },
            { "month": "2018-01", "make": "TOYOTA", "models": { "Coupe": 0, "Hatchback": 15, "Multi-purpose Vehicle": 481, "Sedan": 250, "SUV": 115 } },
            { "month": "2018-02", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 165, "Multi-purpose Vehicle": 246, "Sedan": 105, "SUV": 370 } },
            { "month": "2018-02", "make": "TOYOTA", "models": { "Coupe": 2, "Hatchback": 65, "Multi-purpose Vehicle": 460, "Sedan": 217, "SUV": 191 } },
            { "month": "2018-03", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 204, "Multi-purpose Vehicle": 267, "Sedan": 282, "SUV": 303 } },
            { "month": "2018-03", "make": "TOYOTA", "models": { "Coupe": 0, "Hatchback": 70, "Multi-purpose Vehicle": 446, "Sedan": 363, "SUV": 302 } },
            { "month": "2018-04", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 295, "Multi-purpose Vehicle": 479, "Sedan": 387, "SUV": 308 } },
            { "month": "2018-04", "make": "TOYOTA", "models": { "Coupe": 0, "Hatchback": 71, "Multi-purpose Vehicle": 440, "Sedan": 364, "SUV": 343 } },
            { "month": "2018-05", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 350, "Multi-purpose Vehicle": 605, "Sedan": 378, "SUV": 359 } },
            { "month": "2018-05", "make": "TOYOTA", "models": { "Coupe": 1, "Hatchback": 102, "Multi-purpose Vehicle": 403, "Sedan": 400, "SUV": 351 } },
            { "month": "2018-06", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 474, "Multi-purpose Vehicle": 1100, "Sedan": 359, "SUV": 739 } },
            { "month": "2018-06", "make": "TOYOTA", "models": { "Coupe": 2, "Hatchback": 296, "Multi-purpose Vehicle": 804, "Sedan": 720, "SUV": 627 } },
            { "month": "2018-07", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 183, "Multi-purpose Vehicle": 236, "Sedan": 273, "SUV": 107 } },
            { "month": "2018-07", "make": "TOYOTA", "models": { "Coupe": 2, "Hatchback": 10, "Multi-purpose Vehicle": 304, "Sedan": 149, "SUV": 195 } },
            { "month": "2018-08", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 264, "Multi-purpose Vehicle": 286, "Sedan": 253, "SUV": 276 } },
            { "month": "2018-08", "make": "TOYOTA", "models": { "Coupe": 2, "Hatchback": 17, "Multi-purpose Vehicle": 324, "Sedan": 214, "SUV": 191 } },
            { "month": "2018-09", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 207, "Multi-purpose Vehicle": 322, "Sedan": 218, "SUV": 320 } },
            { "month": "2018-09", "make": "TOYOTA", "models": { "Coupe": 0, "Hatchback": 19, "Multi-purpose Vehicle": 345, "Sedan": 344, "SUV": 228 } },
            { "month": "2018-10", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 269, "Multi-purpose Vehicle": 292, "Sedan": 407, "SUV": 183 } },
            { "month": "2018-10", "make": "TOYOTA", "models": { "Coupe": 0, "Hatchback": 19, "Multi-purpose Vehicle": 648, "Sedan": 413, "SUV": 206 } },
            { "month": "2018-11", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 280, "Multi-purpose Vehicle": 188, "Sedan": 235, "SUV": 176 } },
            { "month": "2018-11", "make": "TOYOTA", "models": { "Coupe": 2, "Hatchback": 49, "Multi-purpose Vehicle": 495, "Sedan": 420, "SUV": 229 } },
            { "month": "2018-12", "make": "HONDA", "models": { "Coupe": 0, "Hatchback": 132, "Multi-purpose Vehicle": 328, "Sedan": 265, "SUV": 346 } },
            { "month": "2018-12", "make": "TOYOTA", "models": { "Coupe": 0, "Hatchback": 62, "Multi-purpose Vehicle": 422, "Sedan": 387, "SUV": 220 } }
        ];

        const svg1 = d3.select("#chart1");
        const margin1 = { top: 50, right: 150, bottom: 50, left: 50 };
        const width1 = +svg1.attr("width") - margin1.left - margin1.right;
        const height1 = +svg1.attr("height") - margin1.top - margin1.bottom;
        const g1 = svg1.append("g").attr("transform", `translate(${margin1.left},${margin1.top})`);

        const x01 = d3.scaleBand()
            .domain([...new Set(data1.map(d => d.month))])
            .range([0, width1])
            .padding(0.2);

        const x11 = d3.scaleBand()
            .domain(["HONDA", "TOYOTA"])
            .range([0, x01.bandwidth()])
            .padding(0.05);

        const y1 = d3.scaleLinear()
            .domain([0, d3.max(data1, d => d3.sum(Object.values(d.models)))]).nice()
            .range([height1, 0]);

        const color1 = d3.scaleOrdinal()
            .domain(["HONDA", "TOYOTA"])
            .range(["green", "blue"]);

        const tooltip1 = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

        const groupedData1 = d3.groups(data1, d => d.month);

        g1.append("g")
            .selectAll("g")
            .data(groupedData1)
            .enter().append("g")
            .attr("transform", d => `translate(${x01(d[0])},0)`)
            .selectAll("rect")
            .data(d => d[1])
            .enter().append("rect")
            .attr("x", d => x11(d.make))
            .attr("y", d => y1(d3.sum(Object.values(d.models))))
            .attr("width", x11.bandwidth())
            .attr("height", d => height1 - y1(d3.sum(Object.values(d.models))))
            .attr("fill", d => color1(d.make))
            .on("mouseover", (event, d) => {
                const models = d.models;
                const tooltipHtml = `<strong>${d.make} (${d.month})</strong><br>` +
                    Object.entries(models).map(([model, count]) => `${model}: ${count}`).join("<br>");

                tooltip1.transition().duration(200).style("opacity", .9);
                tooltip1.html(tooltipHtml)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", () => tooltip1.transition().duration(500).style("opacity", 0));

        g1.append("g")
            .attr("transform", `translate(0,${height1})`)
            .call(d3.axisBottom(x01));

        g1.append("g")
            .call(d3.axisLeft(y1));

        const legend1 = svg1.append("g")
            .attr("transform", `translate(${width1 + margin1.left + 20}, ${margin1.top})`)
            .attr("class", "legend");

        ["HONDA", "TOYOTA"].forEach((key, i) => {
            const legendRow = legend1.append("g")
                .attr("transform", `translate(0, ${i * 20})`);

            legendRow.append("rect")
                .attr("width", 10)
                .attr("height", 10)
                .attr("fill", color1(key));

            legendRow.append("text")
                .attr("x", 20)
                .attr("y", 10)
                .attr("text-anchor", "start")
                .text(key)
                .style("text-transform", "capitalize");
        });

        // Data and logic for the second chart
        const data2 = [
            { vehicle: "Hatchback", make: "Honda", average: 89.72 },
            { vehicle: "Hatchback", make: "Toyota", average: 39.94 },
            { vehicle: "Multi-purpose Vehicle", make: "Honda", average: 173.28 },
            { vehicle: "Multi-purpose Vehicle", make: "Toyota", average: 190.02 },
            { vehicle: "Sedan", make: "Honda", average: 121.99 },
            { vehicle: "Sedan", make: "Toyota", average: 189.34 },
            { vehicle: "SUV", make: "Honda", average: 314.02 },
            { vehicle: "SUV", make: "Toyota", average: 117.42 }
        ];

        const svg2 = d3.select("#chart2");
        const margin2 = { top: 20, right: 30, bottom: 70, left: 70 };
        const width2 = +svg2.attr("width") - margin2.left - margin2.right;
        const height2 = +svg2.attr("height") - margin2.top - margin2.bottom;
        const g2 = svg2.append("g").attr("transform", `translate(${margin2.left},${margin2.top})`);

        const x02 = d3.scaleBand()
            .domain(data2.map(d => d.vehicle))
            .rangeRound([0, width2])
            .paddingInner(0.1);

        const x12 = d3.scaleBand()
            .domain(["Toyota", "Honda"])
            .rangeRound([0, x02.bandwidth()])
            .padding(0.05);

        const y2 = d3.scaleLinear()
            .domain([0, d3.max(data2, d => d.average)]).nice()
            .rangeRound([height2, 0]);

        const color2 = d3.scaleOrdinal()
            .domain(["Toyota", "Honda"])
            .range(["#1f77b4", "#ff7f0e"]);

        const tooltip2 = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

        g2.append("g")
            .selectAll("g")
            .data(d3.group(data2, d => d.vehicle))
            .join("g")
            .attr("transform", d => `translate(${x02(d[0])},0)`)
            .selectAll("rect")
            .data(d => d[1])
            .join("rect")
            .attr("x", d => x12(d.make))
            .attr("y", d => y2(d.average))
            .attr("width", x12.bandwidth())
            .attr("height", d => height2 - y2(d.average))
            .attr("fill", d => color2(d.make))
            .on("mouseover", (event, d) => {
                tooltip2.transition().duration(200).style("opacity", .9);
                tooltip2.html(`<strong>${d.make}</strong><br>Vehicle: ${d.vehicle}<br>Average: ${d.average}`)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", () => tooltip2.transition().duration(500).style("opacity", 0));

        g2.append("g")
            .attr("transform", `translate(0,${height2})`)
            .call(d3.axisBottom(x02));

        g2.append("g")
            .call(d3.axisLeft(y2));

    </script>
</body>
</html>
